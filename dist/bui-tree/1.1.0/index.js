define("bui-tree/1.1.0/index",["jquery","bui-common/1.1.0/common","bui-tree/1.1.0/src/treelist","bui-tree/1.1.0/src/treemixin","bui-tree/1.1.0/src/treemenu","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-tree/1.1.0/src/selection"],function(e,t,n){var i=e("bui-common/1.1.0/common"),o=i.namespace("Tree");i.mix(o,{TreeList:e("bui-tree/1.1.0/src/treelist"),Mixin:e("bui-tree/1.1.0/src/treemixin"),TreeMenu:e("bui-tree/1.1.0/src/treemenu")}),n.exports=o}),define("bui-tree/1.1.0/src/treelist",["jquery","bui-common/1.1.0/common","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-tree/1.1.0/src/treemixin","bui-tree/1.1.0/src/selection"],function(e,t,n){var i=e("bui-common/1.1.0/common"),o=e("bui-list/1.1.0/index"),d=e("bui-tree/1.1.0/src/treemixin"),s=e("bui-tree/1.1.0/src/selection"),a=o.SimpleList.extend([d,s],{},{ATTRS:{itemCls:{value:i.prefix+"tree-item"},itemTpl:{value:"<li>{text}</li>"},idField:{value:"id"}}},{xclass:"tree-list"});n.exports=a}),define("bui-tree/1.1.0/src/treemixin",["jquery","bui-common/1.1.0/common","bui-data/1.1.0/index"],function(e,t,n){function i(e,t){return d.isString(t)&&(t=e.findNode(t)),t}var o=e("jquery"),d=e("bui-common/1.1.0/common"),s=e("bui-data/1.1.0/index"),a="expanded",c="loading",r="checked",l="partial-checked",u={NONE:"none",ALL:"all",CUSTOM:"custom",ONLY_LEAF:"onlyLeaf"},h="x-tree-icon",f="x-tree-elbow",m="x-tree-show-line",p=f+"-",v=h+"-wraper",g=p+"line",_=p+"end",C=p+"empty",k=p+"expander",x=h+"-checkbox",N=h+"-radio",I=k+"-end",b=function(){};b.ATTRS={store:{getter:function(e){if(!e){var t=this,n=new s.TreeStore({root:t.get("root"),data:t.get("nodes")});return t.setInternal("store",n),n}return e}},root:{},nodes:{sync:!1},iconContainer:{},iconWraperTpl:{value:'<span class="'+v+'">{icons}</span>'},showLine:{value:!1},showIcons:{value:!0},iconTpl:{value:'<span class="x-tree-icon {cls}"></span>'},leafCls:{value:p+"leaf"},dirCls:{value:p+"dir"},checkType:{value:"custom"},cascadeCheckd:{value:!0},accordion:{value:!1},multipleCheck:{value:!0},checkedField:{valueFn:function(){return this.getStatusField("checked")}},checkableField:{value:"checkable"},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:!0},showRoot:{value:!1},events:{value:{expanded:!1,collapsed:!1,checkedchange:!1}},expandEvent:{value:"itemdblclick"},expandAnimate:{value:!1},collapseEvent:{value:"itemdblclick"},startLevel:{value:1}},d.augment(b,{collapseAll:function(){var e=this,t=e.get("view").getAllElements();d.each(t,function(t){var n=e.getItemByElement(t);n&&e._collapseNode(n,t,!0)})},collapseNode:function(e){var t,n=this;d.isString(e)&&(e=n.findNode(e)),e&&(t=n.findElement(e),n._collapseNode(e,t))},expandAll:function(){var e=this,t=e.get("view").getAllElements();d.each(t,function(t){var n=e.getItemByElement(t);e._expandNode(n,t,!0)})},expandNode:function(e,t){var n,i=this;d.isString(e)&&(e=i.findNode(e)),e&&(e.parent&&!i.isExpanded(e.parent)&&i.expandNode(e.parent),n=i.findElement(e),i._expandNode(e,n,t))},expandPath:function(e,t,n){if(e){n=n||0;var i,o,d,s,a=this,c=a.get("store"),r=e.split(",");for(i=a.findNode(r[n]),d=n+1;d<r.length;d++)if(s=r[d],o=a.findNode(s,i),i&&o)a.expandNode(i),i=o;else if(i&&t){c.load({id:i.id},function(){o=a.findNode(s,i),o&&a.expandPath(e,t,d)});break}}},findNode:function(e,t){return this.get("store").findNode(e,t)},getCheckedLeaf:function(e){var t=this,n=t.get("store");return n.findNodesBy(function(e){return e.leaf&&t.isChecked(e)},e)},getCheckedNodes:function(e){var t=this,n=t.get("store");return n.findNodesBy(function(e){return t.isChecked(e)},e)},isItemSelectable:function(e){var t=this,n=t.get("dirSelectable"),i=e;return!i||n||i.leaf?!0:!1},isExpanded:function(e){if(!e||e.leaf)return!1;var t,n=this;return n._isRoot(e)&&!n.get("showRoot")?!0:(d.isString(e)&&(item=n.getItem(e)),t=n.findElement(e),this._isExpanded(e,t))},isChecked:function(e){return e?!!e[this.get("checkedField")]:!1},toggleExpand:function(e){var t,n=this;d.isString(e)&&(item=n.getItem(e)),t=n.findElement(e),n._toggleExpand(e,t)},setNodeChecked:function(e,t,n){if(n=null==n?!0:n,e){var o,s,a=this,c=a.get("multipleCheck"),l=a.get("cascadeCheckd");if(e=i(this,e),e&&(o=e.parent,a.isCheckable(e))){if(a.isChecked(e)!==t||a.hasStatus(e,"checked")!==t){if(s=a.findElement(e),l?(s?(a.setItemStatus(e,r,t,s),c?a._resetPatialChecked(e,t,t,s):t&&o&&a.isChecked(o)!=t&&a.setNodeChecked(o,t,!1)):a.isItemDisabled(e)||a.setStatusValue(e,r,t),o&&(a.isChecked(o)!=t?a._resetParentChecked(o):c&&a._resetPatialChecked(o,null,null,null,!0))):a.isItemDisabled(e)||(s?a.setItemStatus(e,r,t,s):a.setStatusValue(e,r,t)),t&&!c&&(a.isChecked(o)||o==a.get("root")||!l)){var u=o.children;d.each(u,function(t){t!==e&&a.isChecked(t)&&a.setNodeChecked(t,!1)})}a.fire("checkedchange",{node:e,element:s,checked:t})}!e.leaf&&n&&l&&d.each(e.children,function(e,i){(c||!t||!c&&0==i)&&a.setNodeChecked(e,t,n)})}}},setChecked:function(e){this.setNodeChecked(e,!0)},clearAllChecked:function(){var e=this,t=e.getCheckedNodes();d.each(t,function(t){e.setNodeChecked(t,!1)})},_initRoot:function(){var e,t,n=this,i=n.get("store"),o=n.get("showRoot");i&&(e=i.get("root"),n.setInternal("root",e),t=o?[e]:e.children,d.each(t,function(e){n._initChecked(e,!0)}),n.clearItems(),n.addItems(t))},_initChecked:function(e,t){var n,i=this,o=i.get("checkType"),s=i.get("checkedField"),a=i.get("multipleCheck"),c=i.get("checkableField"),r=i.get("cascadeCheckd");return o===u.NONE?(e[c]=!1,void(e[s]=!1)):o===u.ONLY_LEAF?void(e.leaf?e[c]=!0:(e[c]=!1,e[s]=!1,t&&d.each(e.children,function(e){i._initChecked(e,t)}))):(o===u.CUSTOM&&null==e[c]&&(e[c]=null!=e[s]),o===u.ALL&&(e[c]=!0),void(e&&i.isCheckable(e)&&(n=e.parent,!i.isChecked(e)&&r&&(n&&i.isChecked(n)&&(a||!i._hasChildChecked(n))&&i.setStatusValue(e,"checked",!0),(e.children&&e.children.length&&i._isAllChildrenChecked(e)||!a&&i._hasChildChecked(e))&&i.setStatusValue(e,"checked",!0)),t&&d.each(e.children,function(e){i._initChecked(e,t)}))))},_resetPatialChecked:function(e,t,n,i,o){if(!e||e.leaf)return!0;var n,d=this;return(t=null==t?d.isChecked(e):t)?void d.setItemStatus(e,l,!1,i):(n=null==n?d._hasChildChecked(e):n,d.setItemStatus(e,l,n,i),void(o&&e.parent&&d._resetPatialChecked(e.parent,!1,n?n:null,null,o)))},_resetParentChecked:function(e){if(this.isCheckable(e)){var t=this,n=t.get("multipleCheck"),i=n?t._isAllChildrenChecked(e):t._hasChildChecked(e);t.setStatusValue(e,"checked",i),t.setNodeChecked(e,i,!1),n&&t._resetPatialChecked(e,i,null,null,!0)}},__bindUI:function(){var e=this,t=(e.get("el"),e.get("multipleCheck"));e.on("itemclick",function(t){var n=o(t.domTarget),i=t.element,d=t.item;if(n.hasClass(k))return e._toggleExpand(d,i),!1;if(n.hasClass(x)){var s=e.isChecked(d);e.setNodeChecked(d,!s)}else n.hasClass(N)&&e.setNodeChecked(d,!0)}),e.on("itemrendered",function(n){var i=n.item,o=n.domTarget;e._resetIcons(i,o),e.isCheckable(i)&&t&&e.get("cascadeCheckd")&&e._resetPatialChecked(i,null,null,o),e._isExpanded(i,o)&&e._showChildren(i)}),e._initExpandEvent()},_initExpandEvent:function(){function e(e){return function(n){var i=o(n.domTarget),d=n.element,s=n.item;i.hasClass(k)||t[e](s,d)}}var t=this,n=(t.get("el"),t.get("expandEvent")),i=t.get("collapseEvent");n==i?t.on(n,e("_toggleExpand")):(n&&t.on(n,e("_expandNode")),i&&t.on(i,e("_collapseNode")))},_isForceChecked:function(){var e=this,t=e.get("multipleCheck");return t?e._isAllChildrenChecked():_isForceChecked()},_isAllChildrenChecked:function(e){if(!e||e.leaf)return!1;var t=this,n=e.children,i=!0;return d.each(n,function(e){return i=i&&t.isChecked(e),i?void 0:!1}),i},_hasChildChecked:function(e){if(!e||e.leaf)return!1;var t=this;return 0!=t.getCheckedNodes(e).length},_isRoot:function(e){var t=this,n=t.get("store");return n&&n.get("root")==e?!0:!1},_setLoadStatus:function(e,t,n){var i=this;i.setItemStatus(e,c,n,t)},_beforeLoadNode:function(e){var t,n=this;d.isString(e)&&(e=n.findNode(e)),t=n.findElement(e),t?(n._collapseNode(e,t),n._setLoadStatus(e,t,!0)):e&&d.each(e.children,function(e){n._removeNode(e)})},onBeforeLoad:function(e){var t=this,n=e.params,i=n.id,o=t.findNode(i)||t.get("root");t._beforeLoadNode(o)},_addNode:function(e,t){var n,i,o,d=this,s=e.parent;d._initChecked(e,!0),s?(d.isExpanded(s)&&(n=s.children.length,o=d._getInsetIndex(e),d.addItemAt(e,o),t==n-1&&t>0&&(i=s.children[t-1],d._updateIcons(i))),d._updateIcons(s)):(o=d._getInsetIndex(e),d.addItemAt(e,o),i=d.get("nodes")[t-1],d._updateIcons(i))},_getInsetIndex:function(e){var t,n=this;return t=n._getNextItem(e),t?n.indexOfItem(t):n.getItemCount()},_getNextItem:function(e){var t,n,i=this,o=e.parent,s=null;return o?(t=o.children,n=d.Array.indexOf(e,t),s=t[n+1],s||i._getNextItem(o)):null},onAdd:function(e){var t=this,n=e.node,i=e.index;t._addNode(n,i)},_updateNode:function(e){var t=this;t.updateItem(e),t._updateIcons(e)},onUpdate:function(e){var t=this,n=e.node;t._updateNode(n)},_removeNode:function(e,t){var n,i,o=this,d=e.parent;o.collapseNode(e),d&&(o.removeItem(e),o.isExpanded(d)&&(n=d.children.length,n==t&&0!==t&&(i=d.children[t-1],o._updateIcons(i))),o._updateIcons(d),o._resetParentChecked(d))},onRemove:function(e){var t=this,n=e.node,i=e.index;t._removeNode(n,i)},_loadNode:function(e){var t=this;t._initChecked(e,!0),t.expandNode(e),t._updateIcons(e),t.setItemStatus(e,c,!1)},__syncUI:function(){var e=this,t=e.get("store"),n=e.get("showRoot");n&&!t.hasData()&&e._initRoot()},onLoad:function(e){var t=this,n=t.get("store"),i=n.get("root");e&&e.node!=i||t._initRoot(),e&&e.node&&t._loadNode(e.node)},_isExpanded:function(e,t){return this.hasStatus(e,a,t)},_getIconsTpl:function(e){var t,n=this,i=e.level,o=n.get("startLevel"),s=n.get("iconWraperTpl"),a=[];for(t=o;i>t;t+=1)a.push(n._getLevelIcon(e,t));return a.push(n._getExpandIcon(e)),a.push(n._getCheckedIcon(e)),a.push(n._getNodeTypeIcon(e)),d.substitute(s,{icons:a.join("")})},_getCheckedIcon:function(e){var t,n=this,i=n.isCheckable(e);return i?(t=n.get("multipleCheck")?x:N,n._getIcon(t)):""},isCheckable:function(e){return e[this.get("checkableField")]},_getExpandIcon:function(e){var t=this,n=k;return e.leaf?t._getLevelIcon(e):(t._isLastNode(e)&&(n=n+" "+I),t._getIcon(n))},_getNodeTypeIcon:function(e){var t=this,n=e.cls?e.cls:t.get(e.leaf?"leafCls":"dirCls");return t._getIcon(n)},_getLevelIcon:function(e,t){var n,i=this,o=i.get("showLine"),d=C;return o&&(e.level===t||null==t?d=i._isLastNode(e)?_:f:(n=i._getParentNode(e,t),d=i._isLastNode(n)?C:g)),i._getIcon(d)},_getParentNode:function(e,t){var n=e.level,i=e.parent,o=n-1;if(t>=n)return null;for(;o>t;)i=i.parent,o-=1;return i},_getIcon:function(e){var t=this,n=t.get("iconTpl");return d.substitute(n,{cls:e})},_isLastNode:function(e){if(!e)return!1;if(e==this.get("root"))return!0;var t,n=this,i=e.parent,o=i?i.children:n.get("nodes");return t=o.length,o[t-1]===e},_initNodes:function(e,t,n){var i=this;d.each(e,function(e){e.level=t,null==e.leaf&&(e.leaf=e.children?!1:!0),n&&!e.parent&&(e.parent=n),i._initChecked(e),e.children&&i._initNodes(e.children,t+1,e)})},_collapseNode:function(e,t,n){var i=this;e.leaf||i.hasStatus(e,a,t)&&(i.setItemStatus(e,a,!1,t),n?(i._collapseChildren(e,n),i.removeItems(e.children)):i._hideChildrenNodes(e),i.fire("collapsed",{node:e,element:t}))},_hideChildrenNodes:function(e){var t=this,n=e.children,i=[];d.each(n,function(e){var n=t.findElement(e);n&&(i.push(n),t._hideChildrenNodes(e))}),t.get("expandAnimate")?(i=o(i),i.animate({height:0},function(){t.removeItems(n)})):t.removeItems(n)},_collapseChildren:function(e,t){var n=this,i=e.children;d.each(i,function(e){n.collapseNode(e,t)})},_expandNode:function(e,t,n){var i=this,o=i.get("accordion"),s=i.get("store");if(!e.leaf){if(!i.hasStatus(e,a,t)){if(o&&e.parent){var c=e.parent.children;d.each(c,function(t){t!=e&&i.collapseNode(t)})}s&&!s.isLoaded(e)?i._isLoading(e,t)||s.loadNode(e):t&&(i.setItemStatus(e,a,!0,t),i._showChildren(e),i.fire("expanded",{node:e,element:t}))}d.each(e.children,function(e){(n||i.isExpanded(e))&&i.expandNode(e,n)})}},_showChildren:function(e){if(e&&e.children){var t,n=this,i=n.indexOfItem(e),o=e.children.length,d=o-1;for(d=o-1;d>=0;d--)t=e.children[d],n.getItem(t)||(n.get("expandAnimate")?(el=n._addNodeAt(t,i+1),el.hide(),el.slideDown()):n.addItemAt(t,i+1))}},_addNodeAt:function(e,t){var n=this,i=n.get("items");return void 0===t&&(t=i.length),i.splice(t,0,e),n.addItemToView(e,t)},_isLoading:function(e,t){var n=this;return n.hasStatus(e,c,t)},_resetIcons:function(e,t){if(this.get("showIcons")){var n,i=this,d=i.get("iconContainer"),s=i._getIconsTpl(e);o(t).find("."+v).remove(),n=o(t).find(d).first(),d&&n.length?o(s).prependTo(n):o(t).prepend(o(s))}},_toggleExpand:function(e,t){var n=this;n._isExpanded(e,t)?n._collapseNode(e,t):n._expandNode(e,t)},_updateIcons:function(e){var t=this,n=t.findElement(e);n&&(t._resetIcons(e,n),t._isExpanded(e,n)&&!e.leaf&&d.each(e.children,function(e){t._updateIcons(e)}))},_uiSetShowRoot:function(){var e=this,t=this.get("showRoot")?0:1;e.set("startLevel",t)},_uiSetNodes:function(e){var t=this,n=t.get("store");n.setResult(e)},_uiSetShowLine:function(e){var t=this,n=t.get("el");e?n.addClass(m):n.removeClass(m)}}),n.exports=b}),define("bui-tree/1.1.0/src/treemenu",["jquery","bui-common/1.1.0/common","bui-data/1.1.0/index","bui-list/1.1.0/index","bui-tree/1.1.0/src/treemixin","bui-tree/1.1.0/src/selection"],function(e,t,n){var i=e("bui-common/1.1.0/common"),o=e("bui-list/1.1.0/index"),d=e("bui-tree/1.1.0/src/treemixin"),s=e("bui-tree/1.1.0/src/selection"),a=o.SimpleList.View.extend({getItemTpl:function(e,t){var n=this,o=n.get("itemTplRender"),d=n.get(e.leaf?"leafTpl":"dirTpl");return o?o(e,t):i.substitute(d,e)}},{xclass:"tree-menu-view"}),c=o.SimpleList.extend([d,s],{},{ATTRS:{itemCls:{value:i.prefix+"tree-item"},dirSelectable:{value:!1},expandEvent:{value:"itemclick"},itemStatusFields:{value:{selected:"selected"}},collapseEvent:{value:"itemclick"},xview:{value:a},dirTpl:{view:!0,value:'<li class="{cls}"><a href="#">{text}</a></li>'},leafTpl:{view:!0,value:'<li class="{cls}"><a href="{href}">{text}</a></li>'},idField:{value:"id"}}},{xclass:"tree-menu"});c.View=a,n.exports=c}),define("bui-tree/1.1.0/src/selection",["jquery","bui-common/1.1.0/common","bui-data/1.1.0/index","bui-list/1.1.0/index"],function(e,t,n){var i=e("bui-common/1.1.0/common"),o=e("bui-list/1.1.0/index").SimpleList,d=function(){};d.ATTRS={},i.augment(d,{getSelection:function(){var e,t=this,n=t.getStatusField("selected");return n?(e=t.get("store"),e.findNodesBy(function(e){return e[n]})):o.prototype.getSelection.call(this)},getSelected:function(){var e,t=this,n=t.getStatusField("selected");return n?(e=t.get("store"),e.findNodeBy(function(e){return e[n]})):o.prototype.getSelected.call(this)}}),n.exports=d});